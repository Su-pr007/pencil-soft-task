# Первое задание (Backend)
Проверить работу серверной части приложения можно обращаясь по url http://localhost/api/..., потому что этот путь направляется nginx'ом на серверную часть.

## Структура проекта
Все "кастомные" классы, которые добавлена мной, находятся в папке _classes_. В Laravel она бы называлась _app_.

## Логика проекта
Роутинг создан с помощью библиотеки [Slim](https://www.slimframework.com/). Она занимается "отловом" http запросов, и направляет их нужному php классу-контроллеру. Здесь он называется [ExpenseController](/www/backend/classes/custom/Controllers/ExpenseController.php).  
*Контроллеры* занимаются первичной обработкой запросов, после чего направляют нужные команды _Сервисам_. В нашем случае - [ExpenseService](/www/backend/classes/custom/Services/ExpenseService.php). Сервис уже выполняет какие-то действия над _Моделями_. Здесь - [ExpenseModel](/www/backend/classes/custom/Models/ExpenseModel.php).

В случае возникновения исключительных ситуаций, в структуре созданы выбрасываемые _классы исключений_. Они находятся в classes/custom/Exceptions. Например, при попытке пользователя взаимодействовать с элементом, которого нет в базе данных, выбрасывается исключение ElementNotFoundException. Его отлавливает контроллер, и возвращает пользователю в ответе текст об ошибке.

## Работа с базой данных
Для работы с базой данных созданы два файла.
[Config.php](/www/backend/classes/custom/Database/Config.php) и [Mysql.php](/www/backend/classes/custom/Database/Mysql.php).  
Config содержит данные для подключения к базе данных
Mysql выполняет определённые действия с базой данных.

По задумке, при изменении типа базы данных (например на PostgreSQL), нужно будет создать новый класс с реализацией той же логики для нового типа базы.
Но нынешняя архитектура создана таким образом, что придётся менять все обращения к классу внутри всех моделей.

Возможно стоило воспользоваться паттерном "Фабрика", чтобы абстрагировать используемую базу данных, и пользоваться нужным инстансом исключительно с помощью общего интерфейса всех классов бд, но у меня мало времени :)

## Послесловие
Первый раз за долгое время делаю проект на чистом PHP.
Но ещё реже с собственно-выдуманной архитектурой.
Опыт интересный, но больше нравится работать так, как задумано фреймворком, или CMS